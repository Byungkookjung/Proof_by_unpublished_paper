<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Result Questionnaire</title>
    <link rel="stylesheet" href="/Website/css/result_questionnaire.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="main-container">
        <div class="result-container">
            <h1>Thank You!</h1>
            <p>Your form has been submitted successfully.</p>
            <h2>Summary of Your Answers</h2>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Answer</th>
                    </tr>
                </thead>
                <tbody id="resultTableBody">
                    <!-- Data will be populated here dynamically -->
                </tbody>
            </table>
        </div>

        <!-- Graph Section -->
        <div class="graph-container">
            <h1>Graph</h1>
            <canvas id="exampleChart"></canvas>
            <div class="login-message">If you would like to save your details and graph, please login.</div>
            <button class="login-button" onclick="location.href='/login'">Login</button>
        </div>
    </div>

    <script>
        // Retrieve data from localStorage
        const formData = JSON.parse(localStorage.getItem('formData'));

        // Populate table with user data
        const resultTableBody = document.getElementById('resultTableBody');
        if (formData) {
            const questions = [
                "1. What is your gender?",
                "2. What is your age?",
                "3. What is your degree level?",
                "4. What is your degree major?",
                "5. What is your current academic year?",
                "6. What is your CGPA (Cumulative Grade Point Average)?",
                "7. What is your residential status?",
                "8. Have you experienced campus discrimination?",
                "9. How many times are you engaged in sports monthly?",
                "10. What is your average sleep duration per day (in hours)?",
                "11. How satisfied are you with your studies? (Scale 1-10)",
                "12. How do you rate your academic workload?",
                "13. How much academic pressure do you feel? (Scale 1-10)"
            ];

            const answers = [
                formData.gender,
                formData.age,
                formData.degreeLevel,
                formData.degreeMajor,
                formData.academicYear,
                formData.cgpa,
                formData.residentialStatus,
                formData.campusDiscrimination,
                formData.sportsEngagement,
                formData.averageSleep,
                formData.studySatisfaction,
                formData.academicWorkload,
                formData.academicPressure
            ];

            questions.forEach((question, index) => {
                const row = document.createElement('tr');
                const questionCell = document.createElement('td');
                questionCell.textContent = question;
                const answerCell = document.createElement('td');
                answerCell.textContent = answers[index] || 'No answer';
                row.appendChild(questionCell);
                row.appendChild(answerCell);
                resultTableBody.appendChild(row);
            });
        }

        // Example Bar Chart using Chart.js
        const ctx = document.getElementById('exampleChart').getContext('2d');
        const exampleChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Q1', 'Q2', 'Q3', 'Q4', 'Q5'],
                datasets: [{
                    label: 'Example Data',
                    data: [12, 19, 3, 5, 2],
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
    <div class="navbar">
        <button onclick="location.href='main_page.html'">Proof by Unpublished Paper</button>
        <button onclick="location.href='comparison.html'">Comparison</button>
        <button onclick="location.href='resource.html'">Resource</button>
        <button onclick="location.href='history_tracker.html'">History Tracker</button>
        <button onclick="location.href='math_model.html'">Math Model</button> <!-- Corrected link -->
        <button onclick="location.href='contact.html'">Contact Us</button>
        <button onclick="location.href='login.html'">Login</button>
    </div>
</body>
</html>
